<!-- Ãrea do Banner -->
<div align="center" style="background-color: white; max-width: 100%;">
  <img alt="BANNER com tÃ­tulo: DevOps e IntegraÃ§Ã£o ContÃ­nua" title="Banner_DevOps" src=".readme_docs/Banner_Github_DevOps.png" width="100%" />
</div>

<!-- TÃ­tulo e breve descriÃ§Ã£o do repositÃ³rio -->
<div align="center"><h1>Estudo de DevOps: EasyOrder</h1><p><b>Exemplo de projeto em Python com aplicaÃ§Ã£o de ferramentas DevOps para estudos</b></p></div>

<!-- Ãcones ou links das tecnologias usadas -->
<p align="center">
  <a href="https://www.atlassian.com/software/jira" title="Jira"><img src="https://upload.wikimedia.org/wikipedia/commons/8/8a/Jira_Logo.svg" alt="Jira" width="65px" height="21px"></a>
  +
  <a href="https://code.visualstudio.com" title="VSCode"><img src="https://upload.wikimedia.org/wikipedia/commons/9/9a/Visual_Studio_Code_1.35_icon.svg" alt="VSCode" width="35px" height="21px"></a>
  +
  <a href="https://www.python.org/" title="Python"><img src="https://github.com/get-icon/geticon/raw/master/icons/python.svg" alt="Python" width="35px" height="21px"></a>
  +
  <a href="https://fastapi.tiangolo.com/" title="FastAPI"><img src="https://raw.githubusercontent.com/fastapi/fastapi/refs/heads/master/docs/en/docs/img/logo-margin/logo-teal.svg" alt="FastAPI" height="31px" style="vertical-align: bottom; margin-top: 30px;"></a>
  +
  <a href="https://www.github.com/" title="GitHub" 
   style="display: inline-flex; align-items: center; justify-content: center; 
          width: 28px; height: 28px; border-radius: 0%; background-color: white;">
    <img 
      src="https://upload.wikimedia.org/wikipedia/commons/9/91/Octicons-mark-github.svg" 
      alt="GitHub" 
      style="width: 28px; height: 28px;"
    >
  </a>
  +
  <a href="https://www.docker.com/" title="Docker"><img src="https://i0.wp.com/blog.kmsigma.com/wp-content/uploads/2025/07/docker-mark-blue-scaled.png" alt="Docker" height="21px"></a>
  +
  <a href="https://www.aws.com/" title="AWS" 
   style="display: inline-flex; align-items: center; justify-content: center; 
          width: 28px; height: 28px; border-radius: 0%; background-color: white;">
    <img 
      src="https://upload.wikimedia.org/wikipedia/commons/9/93/Amazon_Web_Services_Logo.svg" 
      alt="AWS" 
      style="width: 28px; height: 28px;"
    >
  </a>
  +
  <a href="https://aws.amazon.com/pt/cdk/" title="AWS CDK"><img src="https://avatars.githubusercontent.com/u/90621382?s=280&v=4" alt="AWS CDK" height="28px"></a>
  +
  <a href="https://aws.amazon.com/pt/ecs/" title="AWS ECS"><img src="https://images.icon-icons.com/2699/PNG/512/amazon_ecs_logo_icon_168660.png" alt="AWS ECS" height="28px"></a>
  +
  <a href="https://github.com/Supervisor/supervisor" title="Supervisor"><img src="https://raw.githubusercontent.com/Supervisor/supervisor/364e2bfa082960fe85a56392d7eaa2701533b7b4/docs/.static/logo_hi.gif" alt="Supervisor" height="28px"></a>
  +
  <a href="https://aws.amazon.com/pt/cloudwatch/" title="AWS CloudWatch"><img src="https://cdn.freebiesupply.com/logos/large/2x/aws-cloudwatch-logo-svg-vector.svg" alt="AWS CloudWatch" height="28px"></a>
</p>

<!-- Escudos de licenÃ§a e contador de contribuidores -->
<p align="center">
  <a href="https://github.com/guipatriota/EasyOrder/graphs/contributors">
    <img src="https://img.shields.io/github/contributors/guipatriota/EasyOrder?color=%237159c1&logoColor=%237159c1&style=flat" alt="Contributors">
  </a>
  <a href="https://opensource.org/license/gpl-3-0">
    <img src="https://img.shields.io/github/license/guipatriota/EasyOrder?color=%23BD0000" alt="License">
  </a>
</p>
<p align="center">
  <a>
    <img src="https://img.shields.io/github/actions/workflow/status/guipatriota/EasyOrder/ci.yml?branch=main" alt="Build Status">
  </a>
  <a>
    <img src="https://img.shields.io/github/deployments/guipatriota/EasyOrder/production?label=deploy" alt="Deploy">
  </a>
  <a href="https://github.com/guipatriota/EasyOrder/releases">
    <img src="https://img.shields.io/github/release/guipatriota/EasyOrder?label=release" alt="Release">
  </a>
  <a>
    <img src="https://img.shields.io/badge/python-3.12-blue.svg" alt="Python">
  </a>
  <a>
    <img src="https://img.shields.io/badge/docker-ready-blue" alt="Docker">
  </a>
</p>

<!-- DescriÃ§Ã£o do repositÃ³rio e demais dados -->
## DescriÃ§Ã£o

**EasyOrder** Ã© um sistema de exemplo para gerenciamento de pedidos online, desenvolvido com **FastAPI** e estruturado para seguir boas prÃ¡ticas e ilustrar o ciclo completo **DevOps**, passando por **Plan, Develop, Build, Test, Release, Deploy, OperaÃ§Ãµes e Monitoramento**.

## Professor

| [<img src="https://avatars3.githubusercontent.com/u/60905310?s=460&v=4" width="75px;"/>](https://github.com/guipatriota) |
| :------------------------------------------------------------------------------------------------------------------------: |

| [Prof. Guilherme Patriota](https://github.com/guipatriota)

# ğŸ“¦ EasyOrder

## ğŸ“œ SumÃ¡rio
- [VisÃ£o Geral](#-visÃ£o-geral)
- [Tecnologias Utilizadas](#-tecnologias-utilizadas)
- [Arquitetura](#-arquitetura)
- [InstalaÃ§Ã£o e ExecuÃ§Ã£o](#-instalaÃ§Ã£o-e-execuÃ§Ã£o)
- [Testes](#-testes)
- [CI/CD](#-cicd)
- [Pre-commit](#-pre-commit)
- [Deploy](#-deploy)
- [DocumentaÃ§Ã£o](#-documentaÃ§Ã£o)
- [Capturas de Tela](#-capturas-de-tela)
- [Estudo Sobre o Ciclo DevOps](#-estudo-sobre-o-ciclo-devops)
- [Contribuindo](#-contribuindo)
- [LicenÃ§a](#-licenÃ§a)

---

## ğŸ“– VisÃ£o Geral
O **EasyOrder** foi criado como parte de um projeto de ensino para ilustrar:
- **PrÃ¡ticas de DevOps, incluindo CI/CD no GitHub Actions**
- Uso de **FastAPI** para construÃ§Ã£o de APIs modernas e rÃ¡pidas
- EstruturaÃ§Ã£o limpa do cÃ³digo com separaÃ§Ã£o de responsabilidades
- ConteinerizaÃ§Ã£o com **Docker**
- Testes unitÃ¡rios e de integraÃ§Ã£o com **pytest**
- Desenvolvimento em container utilizando **Dev Containers** do VSCode

---

## ğŸ›  Tecnologias Utilizadas
- **GestÃ£o de projeto**: Jira
- **Linguagem**: Python 3.12
- **Framework**: FastAPI
- **IDE base**: VSCode
- **Versionamento**: Github
- **Controle de qualidade**: PrÃ©-commit com black, isort, flake8, script personalizado e pytest com code coverage 
- **Testes**: pytest + GitHub Actions
- **DocumentaÃ§Ã£o**: sphinx + GitHub Actions + GitHub Pages
- **ContainerizaÃ§Ã£o**: Docker
- **Dev Container**: VSCode + devcontainer.json
- **CI/CD**: GitHub Actions
- **Banco de Dados**: Em memÃ³ria (para demonstraÃ§Ã£o, via `memory_db.py`)
- **Infra**: AWS ECS Fargate + CloudWatch via IaC em Python (AWS CDK)
- **OperaÃ§Ãµes**: Supervisor + htop no container
- **Monitoramento**: AWS CloudWatch + Grafana

---

## ğŸ›ï¸ Arquitetura
```
EasyOrder/
â”‚
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.py # Ponto de entrada da aplicaÃ§Ã£o
â”‚   â”œâ”€â”€ db/ # Banco de dados (simulado)
â”‚   â”œâ”€â”€ models/ # Modelos de dados
â”‚   â””â”€â”€ routes/ # Rotas da API
â”‚
â”œâ”€â”€ docs/
â”‚   â””â”€â”€ screenshots/ # Prints de tela para documentaÃ§Ã£o
â”‚
â”œâ”€â”€ infra/
â”‚   â”œâ”€â”€ app.py # AWS CDK em Python para deploy da infraestrutura em nuvem
â”‚   â””â”€â”€ easyorder_stack.py # Stack da infra utilizada
â”‚
â”œâ”€â”€ tests/ # Testes unitÃ¡rios e de integraÃ§Ã£o
â”œâ”€â”€ Dockerfile # ConfiguraÃ§Ã£o de imagem Docker
â”œâ”€â”€ .github/
â”‚   â””â”€â”€ workflows/
â”‚     â”œâ”€â”€ ci.yml # Pipeline CI
â”‚     â”œâ”€â”€ cd.yml # Pipeline CD
â”‚     â””â”€â”€ docs.yml # Pipeline CD de documentaÃ§Ã£o
â”‚
â”œâ”€â”€ .flake8 # ConfiguraÃ§Ã£o do linter
â”œâ”€â”€ pyproject.toml # ConfiguraÃ§Ãµes do projeto, do black (formatador de cÃ³digo) e do isort (ordenador de imports)
â”œâ”€â”€ .pre-commit-config.yaml # ConfiguraÃ§Ã£o das aÃ§Ãµes prÃ©-commit
â”œâ”€â”€ supervisord.conf # ConfiguraÃ§Ã£o do supervisor para iniciar serviÃ§os automaticamente
â”œâ”€â”€ requirements.txt # DependÃªncias do projeto
â””â”€â”€ requirements-dev.txt # DependÃªncias do projeto para desenvolvimento
```
---

## ğŸš€ InstalaÃ§Ã£o e ExecuÃ§Ã£o

### 1ï¸âƒ£ PrÃ©-requisitos
- **Docker** instalado e rodando
- **Visual Studio Code** instalado
- ExtensÃ£o **Dev Containers** instalada ([VSCode Dev Containers](https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-containers))

### 2ï¸âƒ£ Clonar o repositÃ³rio
```bash
git clone https://github.com/guipatriota/EasyOrder.git
cd EasyOrder
```

### 3ï¸âƒ£ Abrir no Dev Container
1. Abra o projeto no VSCode ou IDE compatÃ­vel:
```bash
code .
```

2. Pressione `F1` â†’ **Dev Containers: Reopen in Container**
O VSCode irÃ¡:
- Construir a imagem a partir do Dockerfile usando o target `dev`. Isto farÃ¡:
  - Montagem do workspace dentro do container
  - InstalaÃ§Ã£o de todas as dependÃªncias definidas no `requirements.txt` e `requirements-dev.txt`
  - InicializarÃ¡ o servidor com `uvicorn`

### 4ï¸âƒ£ Executar a aplicaÃ§Ã£o dentro do container
No terminal integrado do VSCode (jÃ¡ dentro do container):
Obs.: Este comando jÃ¡ deve rodar automaticamente. FaÃ§a-o apenas se o servidor da API nÃ£o estiver funcionando.
```bash
uvicorn src.main:app --host 0.0.0.0 --port 8000 --reload
```
A API estarÃ¡ disponÃ­vel em: `http://127.0.0.1:8000`
A documentaÃ§Ã£o interativa do Swagger: `http://localhost:8000/docs`

---

## ğŸ§ª Testes
```bash
pytest tests/ --maxfail=1 --disable-warnings -v
```
---

## âš™ï¸ CI/CD
Este projeto jÃ¡ possui pipeline configurado no **GitHub Actions**:
- **Lint**: Executa verificaÃ§Ã£o de atendimento aos padrÃµes de projeto
- **Build**: Executa testes automaticamente a cada push
- **Deploy**: Pode ser configurado para AWS, Heroku ou outros provedores

---

## ğŸ” Pre-commit

O **pre-commit** Ã© uma ferramenta que garante que o cÃ³digo siga padrÃµes de qualidade **antes de ser commitado** no Git.  
Ele executa automaticamente uma sÃ©rie de verificaÃ§Ãµes e formataÃ§Ãµes para manter o projeto consistente e evitar problemas no pipeline.

### ğŸ“Œ MotivaÃ§Ã£o
- Padronizar cÃ³digo (formataÃ§Ã£o, imports, estilo)
- Evitar commits com erros de lint ou testes quebrados
- Garantir que todos contribuidores sigam as mesmas regras
- Reduzir falhas no CI/CD

### ğŸ“¥ InstalaÃ§Ã£o inicial
1. Instale o pre-commit:
```
pip install pre-commit
```

2. Instale os hooks configurados:
```
pre-commit install --hook-type pre-commit --hook-type pre-push
```

3. Para rodar manualmente em todos os arquivos:
```
pre-commit run --all-files
```

### âš™ï¸ Hooks configurados neste projeto
- **Black** â†’ Formata o cÃ³digo automaticamente.
- **isort** â†’ Organiza imports de forma consistente com o Black.
- **Flake8** (+ plugins) â†’ Detecta problemas de estilo, nomes e boas prÃ¡ticas.
- **check-docstrings-length** â†’ Verifica tamanho de docstrings (script local).
- **pytest com cobertura** (pre-push) â†’ Executa testes e falha se a cobertura for menor que 75%.

âš ï¸ Se um hook modificar arquivos, o commit serÃ¡ interrompido. VocÃª precisarÃ¡ revisar as alteraÃ§Ãµes, adicionÃ¡-las novamente com `git add` e repetir o commit.

---

## ğŸŒ Deploy
**Link de Deploy**: [https://easyorder.example.com](https://easyorder.example.com)
---

## ğŸ“– DocumentaÃ§Ã£o
**Link da Doc**: [https://guipatriota.github.io/EasyOrder/](https://guipatriota.github.io/EasyOrder/)
1. Para abrir servidor da documentaÃ§Ã£o:
```
python -m http.server 8001 --directory docs/_build/html
```

2. Para compilar documentaÃ§Ã£o atualizada:
```
pip install -r docs/requirements-docs.txt
pip install -e .
python -m sphinx.ext.apidoc -f -o docs/api src
sphinx-build -b html docs docs/_build/html 
```
---

## ğŸ–¼ Captura de Tela

![Tela Inicial](docs/screenshots/home.jpg)  

---

## ğŸ‘¨â€ğŸ« Estudo Sobre o Ciclo DevOps

### ğŸ“š Ciclo DevOps no EasyOrder

#### 1ï¸âƒ£ Plan â€“ Planejamento
- **Ferramenta:** Jira  
- Usado para organizar backlog, sprints e tarefas do projeto.  

#### 2ï¸âƒ£ Develop â€“ Desenvolvimento
- **Ferramentas:** VSCode + GitHub  
- Commits automatizados com hooks de prÃ©-commit.

#### 3ï¸âƒ£ Build â€“ ConstruÃ§Ã£o
- **Ferramenta:** Docker + DevContainer VSCode  

#### 4ï¸âƒ£ Test â€“ Testes
- **Ferramenta:** pytest + GitHub Actions  

#### 5ï¸âƒ£ Release â€“ Versionamento
- **Ferramenta:** GitHub Tags  

#### 6ï¸âƒ£ Deploy â€“ PublicaÃ§Ã£o
- **Ferramenta:** GitHub Actions + AWS CDK + ECS Fargate  

#### 7ï¸âƒ£ OperaÃ§Ãµes
- **Ferramentas:** Supervisor + Dockerfile  

#### 8ï¸âƒ£ Monitoramento
- **Ferramenta:** AWS CloudWatch + Grafana

---

### ğŸ“š Guia de Estudo DevOps â€” EasyOrder

Este projeto foi expandido para servir como **guia prÃ¡tico de DevOps**, cobrindo todas as fases do ciclo e listando **comandos Ãºteis** para cada ferramenta.

#### 1ï¸âƒ£ Plan â€” Jira
Ferramenta usada para planejamento e organizaÃ§Ã£o.
- **Dica**: utilize boards no Jira para organizar as fases do projeto.
---
---
#### 2ï¸âƒ£ Develop â€” VSCode + GitHub + Pre-commit
Ambiente de desenvolvimento com automaÃ§Ã£o de qualidade de cÃ³digo.
```bash
# Executar formataÃ§Ã£o automÃ¡tica
black .

# Organizar imports
isort .

# Rodar linter
flake8 .

# Verificar docstrings
python scripts/check_docstrings.py

# Rodar pre-commit manualmente
pre-commit run --all-files
```
---
---
#### 3ï¸âƒ£ Build â€” Docker + Dev Containers
CriaÃ§Ã£o e gerenciamento de containers de desenvolvimento.
```bash
# Construir imagem do devcontainer
docker build -t easyorder-dev --target dev .

# Abrir container no VSCode
Dev Containers: Reopen in Container
```
---
---
#### 4ï¸âƒ£ Test â€” pytest + GitHub Actions
AutomatizaÃ§Ã£o de testes unitÃ¡rios e de integraÃ§Ã£o.
```bash
# Rodar testes localmente
pytest tests/ -v --disable-warnings --maxfail=1
```
---
---
#### 5ï¸âƒ£ Release â€” GitHub Tags
Versionamento semÃ¢ntico.
```bash
# Criar nova tag de release
git tag v1.0.0
git push origin v1.0.0
```
---
---

#### 6ï¸âƒ£ Deploy â€” GitHub Actions + AWS CDK + ECS/ECR
Provisionamento de infraestrutura e deploy automÃ¡tico.
```bash
# SÃ­ntese da stack CDK
cd infra
cdk synth -c imageTag=v1.0.0

# Deploy manual
cdk deploy EasyOrderStack --require-approval never
```
---
---
#### 7ï¸âƒ£ OperaÃ§Ãµes â€” Supervisor + Systemd + Logs
##### Supervisor (para containers - rodar com sudo ou root)
```bash
# Verificar status dos serviÃ§os
supervisorctl status

# Iniciar/parar/reiniciar serviÃ§o
supervisorctl start fastapi
supervisorctl stop fastapi
supervisorctl restart fastapi

# Ver logs em tempo real
supervisorctl tail -f fastapi
supervisorctl tail -f fastapi stderr
```

##### Systemd (para servidores Linux - rodar com sudo ou root)
```bash
# Gerenciar serviÃ§os
systemctl start fastapi
systemctl stop fastapi
systemctl restart fastapi
systemctl status fastapi

# Habilitar serviÃ§o na inicializaÃ§Ã£o
systemctl enable fastapi
systemctl disable fastapi

# Recarregar configs
systemctl daemon-reload
```

##### DiagnÃ³stico do sistema
```bash
# Monitorar uso de CPU, memÃ³ria, processos
htop

# Visualizar portas e conexÃµes
ss -tulnp
```
---
---
#### 8ï¸âƒ£ Monitoramento â€” AWS CloudWatch + Grafana
- **CloudWatch**: coleta logs do Supervisor e Systemd para monitoramento.
- **Grafana**: conecta-se ao CloudWatch para visualizaÃ§Ã£o em dashboards.
```bash
# Enviar logs para CloudWatch (exemplo)
aws logs create-log-group --log-group-name EasyOrderLogs
aws logs create-log-stream --log-group-name EasyOrderLogs --log-stream-name FastAPI
aws logs put-log-events --log-group-name EasyOrderLogs --log-stream-name FastAPI --log-events file://logs.json
```
---

## ğŸ¤ Contribuindo
ContribuiÃ§Ãµes sÃ£o bem-vindas!  
Para contribuir:
1. FaÃ§a um fork do projeto
2. Crie uma branch (`git checkout -b feature/nova-funcionalidade`)
3. Commit suas alteraÃ§Ãµes (`git commit -m 'Adiciona nova funcionalidade'`)
4. Envie um push para a branch (`git push origin feature/nova-funcionalidade`)
5. Abra um Pull Request

---

## ğŸ“„ LicenÃ§a
Este projeto estÃ¡ licenciado sob a [GNU General Public License, versÃ£o 3](LICENSE).

